If cd is not present and use a midi > 1000, then play that midi, and
not #midi-1000. That's what is done with playmidi() - although this is
actually a bug :) The code should also play #midi-1000 there, but
there's a missing "return;", and thus the game plays #midi right
after.

If a cd is present, it is taken into account (for playing 100X tracks)
even if it doesn't have exactly 19 tracks.

The two WAVE files played by Dinkedit were extracted from Dinkedit.exe
v1.06's resources and are now external. Incidentally those were
missing (as well as the application icon) in Dinkedit v1.07. Also,
stop.wav had to be converted by Audacity to get accepted by SDL_Mixer
("Complex WAVE files not supported").


Avoid color/palette glitch after show_bmp() is finished, by switching
the physical/screen palette only when the double buffer is ready to be
Flip()ed.


If you change SPLASH.BMP's palette (use utils/bmpinvert.cpp, for
example) and without changing Ts01.BMP accordingly, graphics are
seriously messed up in the original game (ie. because the main palette
is first set to SPLASH.BMP, tiles are dithered to that palette; then
those palette indexes are maintained but displayed with Ts01.BMP's
palette on the screen; graphics are not affected because load_sprite
explicitely and temporarily sets the palette to real_pal aka Ts01.BMP
before loading the script, so dithering won't happen in that case).
It seems I fixed that in FreeDink (even when DX was still available
for testing), probably with a early doInit() clean-up where I removed
redundant definitions of the main palette. I doubt there's a point in
re-implementing that bug - I don't think that was ever used as a
"feature" ;)


Enabled screen scrolling in windowed mode (it was explicitely disabled
in command-line options parsing - maybe there was a reason for this?).

In windowed mode, fill_screen doesn't use the right palette to select
colours. It also does not support fade_down() and fade_up(). This is
fixed with SDL. In theory the fact that sprites were weirdly displayed
in non-8-bit modes should be fixed as well - it was due to raw access
to the buffer memory assuming that the mode with 8-bit.


Dinkedit 1.07 does not play sounds anymore (v1.06 did): now plays
external .wav, grabbed in Dinkedit 1.06 resources.


Dinkedit creates a custom sequence #1 but mark the 4th frame as
-1. This made FreeDinkEdit crash, so it's set to 0, which means "end
of sequence".

In init_scripts, the script may check the active status of sprite
1000, while the sprite array has 300 elements. This caused bugs after
the port and is now fixed. Curiously it didn't seem to cause bugs
before.
